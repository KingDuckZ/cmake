configure_file(${CMAKE_CURRENT_SOURCE_DIR}/Test.cmake.in
               ${CMAKE_CURRENT_BINARY_DIR}/Test.cmake @ONLY)

get_filename_component(cmake_dir "${CMAKE_CMAKE_COMMAND}" DIRECTORY)

macro(add_ddeps_test_macro test)
    add_test(D.DDeps.${test} ${CMAKE_CMAKE_COMMAND}
       -DTEST=${test}
       -DDDEPS=${cmake_dir}/ddeps
       -DARGS=${ARGN}
       -P ${CMAKE_CURRENT_BINARY_DIR}/Test.cmake
       )
endmacro()

add_ddeps_test_macro(CommentedImports.BlockComment)
add_ddeps_test_macro(CommentedImports.LineComment)
add_ddeps_test_macro(CommentedImports.NestedComment)
add_ddeps_test_macro(ConditionalImports.CMakeSpecifiedDebug -debug=ProjectDebug)
add_ddeps_test_macro(ConditionalImports.CMakeSpecifiedNumericDebug -debug=4)
add_ddeps_test_macro(ConditionalImports.CMakeSpecifiedNumericVersion -version=4)
add_ddeps_test_macro(ConditionalImports.CMakeSpecifiedVersion -version=ProjectCondition)
add_ddeps_test_macro(ConditionalImports.DebugBlock)
add_ddeps_test_macro(ConditionalImports.DebugColon)
add_ddeps_test_macro(ConditionalImports.DebugFlag -debug)
add_ddeps_test_macro(ConditionalImports.DebugStatement)
add_ddeps_test_macro(ConditionalImports.NumericDebugBlock)
add_ddeps_test_macro(ConditionalImports.NumericDebugColon)
add_ddeps_test_macro(ConditionalImports.NumericDebugStatement)
add_ddeps_test_macro(ConditionalImports.NumericVersionBlock)
add_ddeps_test_macro(ConditionalImports.NumericVersionColon)
add_ddeps_test_macro(ConditionalImports.NumericVersionStatement)
add_ddeps_test_macro(ConditionalImports.RawDebugBlock)
add_ddeps_test_macro(ConditionalImports.RawDebugColon)
add_ddeps_test_macro(ConditionalImports.RawDebugStatement)
add_ddeps_test_macro(ConditionalImports.SourceSpecifiedDebug)
add_ddeps_test_macro(ConditionalImports.SourceSpecifiedNumericDebug)
add_ddeps_test_macro(ConditionalImports.SourceSpecifiedNumericVersion)
add_ddeps_test_macro(ConditionalImports.SourceSpecifiedVersion)
add_ddeps_test_macro(ConditionalImports.UnittestBlock -unittest)
add_ddeps_test_macro(ConditionalImports.VersionBlock)
add_ddeps_test_macro(ConditionalImports.VersionColon)
add_ddeps_test_macro(ConditionalImports.VersionStatement)
add_ddeps_test_macro(CyclicImport)
add_ddeps_test_macro(ImportAfterExplicitEOF)
add_ddeps_test_macro(ImportHeader)
add_ddeps_test_macro(ImportPropagation)
add_ddeps_test_macro(MissingImport)
add_ddeps_test_macro(ModuleWithoutName)
add_ddeps_test_macro(NestedImports.AbstractClass)
add_ddeps_test_macro(NestedImports.Class)
add_ddeps_test_macro(NestedImports.ClassWithInheritance)
add_ddeps_test_macro(NestedImports.FinalClass)
add_ddeps_test_macro(NestedImports.InstanceMethod)
add_ddeps_test_macro(NestedImports.Interface)
add_ddeps_test_macro(NestedImports.Method)
add_ddeps_test_macro(NestedImports.MethodWithContracts)
add_ddeps_test_macro(NestedImports.NestedClass)
add_ddeps_test_macro(NestedImports.Struct)
add_ddeps_test_macro(NestedImports.Template)
add_ddeps_test_macro(NestedImports.TemplatedAbstractClass)
add_ddeps_test_macro(NestedImports.TemplatedClass)
add_ddeps_test_macro(NestedImports.TemplatedClassWithConstraints)
add_ddeps_test_macro(NestedImports.TemplatedClassWithConstraintsAndInheritance)
add_ddeps_test_macro(NestedImports.TemplatedFinalClass)
add_ddeps_test_macro(NestedImports.TemplatedInstanceMethod)
add_ddeps_test_macro(NestedImports.TemplatedInterface)
add_ddeps_test_macro(NestedImports.TemplatedMethod)
add_ddeps_test_macro(NestedImports.TemplatedMethodWithContracts)
add_ddeps_test_macro(NestedImports.TemplatedNestedClass)
add_ddeps_test_macro(NestedImports.TemplatedStruct)
add_ddeps_test_macro(PackageProtection)
add_ddeps_test_macro(RenamedImport)
add_ddeps_test_macro(RenamedSelectiveImport)
add_ddeps_test_macro(SelectiveImport)
add_ddeps_test_macro(Shebang)
add_ddeps_test_macro(SinglePrivateImport)
add_ddeps_test_macro(SinglePublicImport)
add_ddeps_test_macro(SourceAndHeader)
add_ddeps_test_macro(StaticImport)
add_ddeps_test_macro(TextImports.AlternateWYSIWYGString)
add_ddeps_test_macro(TextImports.CharDelimitedString)
add_ddeps_test_macro(TextImports.HexString)
add_ddeps_test_macro(TextImports.IdentDelimitedString)
add_ddeps_test_macro(TextImports.NestedDelimitedString)
add_ddeps_test_macro(TextImports.RegularString)
add_ddeps_test_macro(TextImports.RegularStringWithEscapes)
add_ddeps_test_macro(TextImports.TokenString)
add_ddeps_test_macro(TextImports.WYSIWYGString)
